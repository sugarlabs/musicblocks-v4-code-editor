!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.codeEditor=t():e.codeEditor=t()}(self,(()=>(()=>{"use strict";var e={189:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(81),i=n.n(r),l=n(645),s=n.n(l)()(i());s.push([e.id,".editor_outer_container{\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  width: 100%;\r\n  height:100%;\r\n  background-color: #ffffff;\r\n  overflow: hidden;\r\n  \r\n}\r\n.editor_inner_container{\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  width:100%;\r\n  height: 100%;\r\n  margin: 0%;\r\n  background-color: #ebebeb;\r\n  color: #ffffff;\r\n  overflow: scroll;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n          flex-direction: row;\r\n  -webkit-box-pack: start;\r\n      -ms-flex-pack: start;\r\n          justify-content: flex-start;\r\n}\r\n\r\n.code_editor_line_measure{\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  margin: 1px 1px 1px 34px;\r\n  height: 18.2px;\r\n  visibility: hidden;\r\n}\r\n.code_editor_line_measure p{\r\n  color: rgb(0, 0, 0);\r\n  margin:1px;\r\n  pointer-events: none;\r\n  font-size: 1rem;\r\n  font-family: 'Courier New', Courier, monospace;\r\n  margin: 0;\r\n}\r\n\r\n.code_editor_cursor{\r\n  position: absolute;\r\n  top:0;\r\n  left:35px;\r\n  width: 1px;\r\n  height: 18.2px;\r\n  background-color: transparent;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n}\r\n.code_editor_cursor_blink{\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  width: 30px;\r\n  flex-shrink: 0;\r\n  height: 100%;\r\n  background-color: #1b9cfc;\r\n  overflow: hidden;\r\n}\r\n.code_editor_cursor input {\r\n  position: relative;\r\n  top:10px;\r\n  left:0;\r\n  background-color: transparent;\r\n  border: none;\r\n  width: 0;\r\n  padding: 0;\r\n  /* display: none; */\r\n}\r\n\r\n\r\n.code_editor_lines_container{\r\n  position:relative;\r\n  top:0;\r\n  left:0;\r\n  /* margin-left: 24px; */\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-pack: start;\r\n      -ms-flex-pack: start;\r\n          justify-content: flex-start;\r\n  -webkit-box-align:start;\r\n      -ms-flex-align:start;\r\n          align-items:flex-start ;\r\n  /* min-width: 100%; */\r\n  width:100%;\r\n}\r\n\r\n.line{\r\n  position: relative;\r\n  left:34px;\r\n  top:0;\r\n  width:100%;\r\n  height:18.2px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n}\r\n\r\n.text{\r\n  position:relative;\r\n  top:0;\r\n  left:0;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  align-items:center;\r\n  height:18.2px;\r\n  color: #000000;\r\n  margin-left: 1px;\r\n}\r\n.text pre{\r\n  position: relative;\r\n  top:0;\r\n  left:0;\r\n  width: 100%;\r\n  font-size: 1rem;\r\n  font-family: 'Courier New', Courier, monospace;\r\n  margin: 0;\r\n  height: 18.2px;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* .number_line_container{\r\n  position: sticky;\r\n  top:0;\r\n  left:0;\r\n  width:34px;\r\n  z-index: 1;\r\n  height: fit-content;\r\n  flex-shrink: 0;\r\n  background-color: #1b9cfc;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-pack: start;\r\n      -ms-flex-pack: start;\r\n          justify-content: flex-start;\r\n}\r\n.number_line_container p{\r\n  position: relative ;\r\n  top:0;\r\n  left:0;\r\n  width:100%;\r\n  height:18.2px;\r\n  color: #ffffff;\r\n  margin:0px;\r\n  pointer-events: none;\r\n  font-size: 1rem;\r\n  font-family: 'Courier New', Courier, monospace;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-user-select: none;       \r\n  -moz-user-select: none; \r\n  -ms-user-select: none; \r\n  user-select: none; \r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n} */\r\n\r\n\r\n.number_line_cont{\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  min-width:100%;\r\n  height: fit-content;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: flex-start;\r\n  flex-shrink: 0; \r\n  z-index: 2;\r\n  pointer-events: none;\r\n}\r\n.number_line{\r\n  position: sticky;\r\n  top:0;\r\n  left:0;\r\n  width:34px;\r\n  height:18.2px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  transform: translateY(-100%);\r\n  background-color: #1b9cfc;\r\n}\r\n.number_line p{\r\n  position: relative;\r\n  top:0;\r\n  left:0;\r\n  width: 100%;\r\n  height: 100%;\r\n  margin:0;\r\n  padding:0;\r\n  color: #ffffff;\r\n  text-align: center;\r\n}\r\n.background_selected_text{\r\n  background-color: rgb(160, 159, 159);\r\n}",""]);const o=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,l){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(s[a]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&s[d[0]]||(void 0!==l&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=l),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var l={},s=[],o=0;o<e.length;o++){var a=e[o],c=r.base?a[0]+r.base:a[0],d=l[c]||0,h="".concat(c," ").concat(d);l[c]=d+1;var g=n(h),u={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==g)t[g].references++,t[g].updater(u);else{var m=i(u,r);r.byIndex=o,t.splice(o,0,{identifier:h,updater:m,references:1})}s.push(h)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var l=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<l.length;s++){var o=n(l[s]);t[o].references--}for(var a=r(e,i),c=0;c<l.length;c++){var d=n(l[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}l=a}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var l=n.sourceMap;l&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var l=t[r]={id:r,exports:{}};return e[r](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var r={};return(()=>{function e(e,t){let n=t.getLineNumber(),r=t.getCharNumber(),i=t.getCharSize(),l=t.getLineHeight(),s=t.getNumberLineWidth(),o=(n-1)*l,a=r*i+s,c=e.scrollLeft+s,d=e.scrollLeft+e.clientWidth,h=e.scrollTop,g=e.scrollTop+e.clientHeight-l;a>=c&&a>=d?e.scrollLeft=a-e.clientWidth+5:a<=c&&a<=d&&(e.scrollLeft=a-s),o<=h&&o<=g?e.scrollTop=o:o>=h&&o>=g&&(e.scrollTop=o-e.clientHeight+l)}n.r(r),n.d(r,{default:()=>w});class t{constructor(){this.undoStore=[],this.redoStore=[]}getUndoStore(){return this.undoStore}setUndoStore(e){return this.undoStore=e,this.undoStore}pushIntoUndoStore(e){this.undoStore.push(e)}popFromUndoStore(){this.undoStore.pop()}shiftUndoStore(){this.undoStore.shift()}getRedoStore(){return this.redoStore}setRedoStore(e){return this.redoStore=e,this.redoStore}pushIntoRedoStore(e){this.redoStore.push(e)}popFromRedoStore(){this.redoStore.pop()}shiftRedoState(){this.redoStore.shift()}}class i{constructor(){this.drag=!1,this.textSelectionInProgress=!1,this.mouseDown=!1}getDrag(){return this.drag}setDrag(e){return this.drag=e,this.drag}getTextSelectionInProgress(){return this.textSelectionInProgress}setTextSelectionInProgress(e){return this.textSelectionInProgress=e,this.textSelectionInProgress}getMouseDown(){return this.mouseDown}setMouseDown(e){return this.mouseDown=e,this.mouseDown}}class l{constructor(){this.lineNumber=1,this.charNumber=0,this.lineHeight=18.2,this.numberLineWidth=35,this.charSize=0,this.lineStart={line:0,char:0},this.lineEnd={line:0,char:0}}getLineNumber(){return this.lineNumber}setLineNumber(e){return this.lineNumber=e,this.lineNumber}getCharNumber(){return this.charNumber}setCharNumber(e){return this.charNumber=e,this.charNumber}getLineHeight(){return this.lineHeight}setLineHeight(e){return this.lineHeight=e,this.lineHeight}getCharSize(){return this.charSize}setCharSize(e){return this.charSize=e,this.charSize}getLineStart(){return this.lineStart}setLineStart(e){return this.lineStart=e,this.lineStart}getLineEnd(){return this.lineEnd}setLineEnd(e){return this.lineEnd=e,this.lineEnd}getNumberLineWidth(){return this.numberLineWidth}setNumberLineWidth(e){return this.numberLineWidth=e,this.numberLineWidth}}class s{constructor(){this.codeEditorAutoScrollX=null,this.codeEditorAutoScrollY=null}getCodeEditorAutoScrollX(){return this.codeEditorAutoScrollX}setCodeEditorAutoScrollX(e){return this.codeEditorAutoScrollX=e,this.codeEditorAutoScrollX}clearCodeEditorAutoScrollX(){clearInterval(this.codeEditorAutoScrollX)}getCodeEditorAutoScrollY(){return this.codeEditorAutoScrollY}setCodeEditorAutoScrollY(e){return this.codeEditorAutoScrollY=e,this.codeEditorAutoScrollY}clearCodeEditorAutoScrollY(){clearInterval(this.codeEditorAutoScrollY)}}function o(e){e.querySelectorAll(".background_selected_text").forEach((e=>{e.classList.remove("background_selected_text")}))}function a(t,n,r){let i=n.getLineNumber(),l=n.getCharNumber(),s=n.getCharSize(),a=n.getLineHeight(),c=n.getNumberLineWidth(),d=n.getLineStart(),h=n.getLineEnd(),g=t.getElementsByClassName("line"),u=t.getElementsByClassName("code_editor_cursor")[0];if(o(t),d.line>h.line){d.line<=0&&(d.line=1),d.char>g[d.line-1].innerText.length&&(d.char=g[d.line-1].innerText.length),h.char<0&&(h.char=0),g[h.line-1].innerText.length>=h.char&&h.char>=0&&(g[h.line-1].childNodes[0].innerHTML="<pre>"+g[h.line-1].innerText.slice(0,h.char)+"<span class='background_selected_text'>"+g[h.line-1].innerText.slice(h.char,g[h.line-1].innerText.length)+"</span></pre>"),g[d.line-1].innerText.length>=d.char?g[d.line-1].childNodes[0].innerHTML="<pre><span class='background_selected_text'>"+g[d.line-1].innerText.slice(0,d.char)+"</span>"+g[d.line-1].innerText.slice(d.char,g[d.line-1].innerText.length)+"</pre>":g[d.line-1].childNodes[0].innerHTML="<pre><span class='background_selected_text'>"+g[d.line-1].innerText+"</span></pre>";for(let e=h.line+1;e<d.line;e++)g[e-1].childNodes[0].childNodes[0].classList.add("background_selected_text");i=h.line>g.length?g.length:h.line,l=h.char>g[i-1].innerText.length?g[i-1].innerText.length:h.char,n.setLineNumber(i),n.setCharNumber(l),u.style.left=l*s+c+"px",u.style.top=(i-1)*a+"px"}else if(d.line<h.line){h.line>g.length&&(h.line=g.length),h.char>g[h.line-1].innerText.length&&(h.char=g[h.line-1].innerText.length),d.char<0&&(d.char=0),g[d.line-1].innerText.length>=d.char&&d.char>=0&&(g[d.line-1].childNodes[0].innerHTML="<pre>"+g[d.line-1].innerText.slice(0,d.char)+"<span class='background_selected_text'>"+g[d.line-1].innerText.slice(d.char,g[d.line-1].innerText.length)+"</span></pre>"),g[h.line-1].innerText.length>=h.char?g[h.line-1].childNodes[0].innerHTML="<pre><span class='background_selected_text'>"+g[h.line-1].innerText.slice(0,h.char)+"</span>"+g[h.line-1].innerText.slice(h.char,g[h.line-1].innerText.length)+"</pre>":g[h.line-1].childNodes[0].innerHTML="<pre><span class='background_selected_text'>"+g[h.line-1].innerText+"</span></pre>";for(let e=d.line+1;e<h.line;e++)g[e-1].childNodes[0].childNodes[0].classList.add("background_selected_text");i=h.line>g.length?g.length:h.line,l=h.char>g[i-1].innerText.length?g[i-1].innerText.length:h.char,n.setLineNumber(i),n.setCharNumber(l),u.style.left=l*s+c+"px",u.style.top=(i-1)*a+"px"}else if(d.line==h.line){d.line>g.length&&(d.line=g.length,h.line=g.length),h.char<0&&(h.char=0),d.char<0&&(d.char=0);let e=h.char>d.char?d.char:h.char,t=h.char>d.char?h.char:d.char,r=g[h.line-1].childNodes[0].innerText.slice(0,e),o=g[h.line-1].childNodes[0].innerText.slice(e,t),m=g[h.line-1].childNodes[0].innerText.slice(t,g[h.line-1].childNodes[0].innerText.length);g[h.line-1].childNodes[0].innerHTML="<pre>"+r+"<span class='background_selected_text'>"+o+"</span>"+m+"</pre>",i=h.line>g.length?g.length:h.line,l=h.char>g[i-1].innerText.length?g[i-1].innerText.length:h.char,n.setLineNumber(i),n.setCharNumber(l),u.style.left=l*s+c+"px",u.style.top=(i-1)*a+"px"}n.setLineEnd(h),n.setLineStart(d),t.querySelector("#code-editor-cursor-input").focus(),e(t,n),r.setTextSelectionInProgress(!0)}function c(e,t){let n=t.getElementsByClassName("number_line");n[n.length-1].parentNode.removeChild(n[n.length-1]);let r=t.getElementsByClassName("line");r[e-1].parentNode.removeChild(r[e-1])}function d(e,t,n){let r=t.getLineNumber(),i=t.getCharNumber(),l=t.getLineStart(),s=t.getLineEnd();n.setRedoStore([]);let o=n.getUndoStore(),a=e.getElementsByClassName("code_editor_lines_container")[0],c=e.getElementsByClassName("number_line_cont")[0];o.length>20?(n.shiftUndoStore(),n.pushIntoUndoStore({lineNumber:r,charNumber:i,lineEnd:s,lineStart:l,data:a.innerHTML,numberLineData:c.innerHTML})):n.pushIntoUndoStore({lineNumber:r,charNumber:i,lineEnd:s,lineStart:l,data:a.innerHTML,numberLineData:c.innerHTML})}function h(e,t,n,r,i){let l=t.getCharNumber(),s=t.getCharSize(),o=t.getLineHeight(),a=t.getNumberLineWidth(),h=t.getLineStart(),g=t.getLineEnd(),u=t.getLineNumber();d(r,t,i);let m=r.getElementsByClassName("line"),p=h.line>g.line||h.line==g.line&&h.char>g.char?g:h,x=h.line>g.line||h.line==g.line&&h.char>g.char?h:g;x.line>m.length&&(x.line=m.length),p.line<=0&&(p.line=1),p.char<0&&(p.char=0),x.char>m[x.line-1].innerText.length+1&&(x.char=m[x.line-1].innerText.length+1),m[x.line-1].innerText.length<x.char?x.char=m[x.line-1].innerText.length:p.char<0&&(p.char=0);let b=m[x.line-1].innerText.slice(x.char,m[x.line-1].innerText.length),f=m[p.line-1].innerText.slice(0,p.char);m[p.line-1].childNodes[0].innerHTML="<pre>"+f+e+b+"</pre>";let N=r.getElementsByClassName("code_editor_cursor")[0];l=p.char>m[p.line-1].childNodes[0].innerText.length?m[p.line-1].childNodes[0].innerText.length+1:p.char+e.length,u=p.line,t.setCharNumber(l),t.setLineNumber(u),N.style.left=l*s+a+"px",N.style.top=(u-1)*o+"px";let L=x.line-p.line;for(;L>0;)c(p.line+1,r),L-=1;r.querySelector("#code-editor-cursor-input").focus(),n.setTextSelectionInProgress(!1)}var g=n(379),u=n.n(g),m=n(795),p=n.n(m),x=n(569),b=n.n(x),f=n(565),N=n.n(f),L=n(216),C=n.n(L),E=n(589),y=n.n(E),T=n(189),S={};S.styleTagTransform=y(),S.setAttributes=N(),S.insert=b().bind(null,"head"),S.domAPI=p(),S.insertStyleElement=C(),u()(T.Z,S),T.Z&&T.Z.locals&&T.Z.locals;class _{constructor(){this.codeEditor=function(){const e=document.createElement("div");e.id="code-editor-cont",e.classList.add("editor_inner_container");const t=document.createElement("div");t.classList.add("code_editor_line_measure");const n=document.createElement("p");n.innerText="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",t.appendChild(n);const r=document.createElement("div");r.classList.add("code_editor_cursor");const i=document.createElement("div");i.classList.add("code_editor_cursor_blink"),r.appendChild(i);const l=document.createElement("input");l.autocapitalize="none",l.type="text",l.id="code-editor-cursor-input",r.appendChild(l);const s=document.createElement("div");s.classList.add("number_line_cont");const o=document.createElement("div");o.classList.add("number_line");const a=document.createElement("p");a.innerText="0",o.appendChild(a),s.appendChild(o);const c=document.createElement("div");c.classList.add("number_line");const d=document.createElement("p");d.innerText="1",c.appendChild(d),s.appendChild(c);const h=document.createElement("div");h.classList.add("code_editor_lines_container"),h.tabindex="0";const g=document.createElement("div");g.classList.add("line");const u=document.createElement("div");u.classList.add("text");const m=document.createElement("pre");return u.appendChild(m),g.appendChild(u),h.appendChild(g),e.appendChild(t),e.appendChild(r),e.appendChild(s),e.appendChild(h),e}()}getCodeEditor(){return this.codeEditor}setCodeEditor(e){this.codeEditor=e}}class v{constructor(){this.codeEditor=new _,this.dataVariables=new l,this.conditionalVariables=new i,this.arrayVariables=new t,this.intervalVariables=new s}generateCodeEditorDOM(){return this.combineAllActions(),this.codeEditor.getCodeEditor()}combineAllActions(){let t=this.codeEditor.getCodeEditor();(function(e,t,n,r){let i,l,s=e.getElementsByClassName("code_editor_lines_container")[0];s.addEventListener("mouseup",(i=>{let l=n.getMouseDown(),a=n.getDrag(),c=r.getCharSize(),d=r.getLineNumber(),h=r.getCharNumber(),g=r.getLineEnd(),u=r.getNumberLineWidth(),m=r.getLineHeight();if(n.setMouseDown(!1),l=!1,t.clearCodeEditorAutoScrollX(),t.clearCodeEditorAutoScrollY(),a||function(e,t,n,r){let i=n.getNumberLineWidth(),l=n.getLineNumber(),s=n.getCharNumber(),a=n.getLineHeight(),c=e.getElementsByClassName("code_editor_lines_container")[0];t.setTextSelectionInProgress(!1),o(e);let d=c.getBoundingClientRect(),h=r.clientX-d.left-i,g=r.clientY-d.top,u=n.getCharSize();l=parseInt(g/a)+1,s=parseInt(h/u),n.setCharNumber(s),n.setLineNumber(l);let m=e.getElementsByClassName("code_editor_cursor")[0],p=e.getElementsByClassName("text");p[l-1]||(l=p.length,n.setLineNumber(l));let x=p[l-1].innerText.length;"​"==p[l-1].innerText&&(x=0),s>x?(m.style.left=x*u+i+"px",s=x,n.setCharNumber(s)):s<0?(m.style.left=i+"px",s=0,n.setCharNumber(s)):m.style.left=s*u+i+"px",m.style.top=(l-1)*a+"px",e.querySelector("#code-editor-cursor-input").focus()}(e,n,r,i),a){let e=s.getBoundingClientRect(),t=i.clientX-e.left-u,n=i.clientY-e.top;d=parseInt(n/m)+1,h=parseInt(t/c),r.setLineNumber(d),r.setCharNumber(h),g={line:d,char:h},r.setLineEnd(g)}})),s.addEventListener("mousedown",(e=>{let t=n.getMouseDown(),i=n.getDrag(),l=r.getCharSize(),o=r.getLineNumber(),a=r.getCharNumber(),c=r.getLineStart(),d=r.getNumberLineWidth(),h=r.getLineHeight();n.setMouseDown(!0),n.setDrag(!1),t=!0,i=!1;let g=s.getBoundingClientRect(),u=e.clientX-g.left-d,m=e.clientY-g.top;o=parseInt(m/h)+1,a=parseInt(u/l),r.setLineNumber(o),r.setCharNumber(a),c={line:o,char:a},r.setLineStart(c)})),s.addEventListener("mousemove",(l=>{let o=n.getMouseDown(),c=n.getDrag(),d=r.getCharSize(),h=r.getLineNumber(),g=r.getCharNumber(),u=r.getLineEnd(),m=r.getNumberLineWidth(),p=r.getLineHeight();l.preventDefault(),t.clearCodeEditorAutoScrollX(),t.clearCodeEditorAutoScrollY(),o&&(n.setDrag(!0),c=!0,clearInterval(i),i=setTimeout((()=>{let t=s.getBoundingClientRect(),i=l.clientX-t.left-m,o=l.clientY-t.top;h=parseInt(o/p)+1,g=parseInt(i/d),r.setLineNumber(h),r.setCharNumber(g),u={line:h,char:g},r.setLineEnd(u),a(e,r,n)}),1))})),e.addEventListener("scroll",(()=>{clearInterval(l),l=setTimeout((()=>{const t=e.getElementsByClassName("number_line_cont")[0];t.clientWidth!=e.scrollWidth&&(t.style.width=e.scrollWidth+"px"),s.clientWidth!=e.scrollWidth&&(s.style.width=e.scrollWidth+"px")}),500)}))})(t,this.intervalVariables,this.conditionalVariables,this.dataVariables),function(t,n,r,i){let l=t.querySelector("#code-editor-cursor-input");l.addEventListener("input",(l=>{!function(t,n,r,i,l){t.preventDefault();let s=i.getTextSelectionInProgress(),o=i.getDrag(),a=r.getCharNumber(),c=r.getLineNumber(),d=r.getCharSize(),g=r.getNumberLineWidth();if(s=!1,i.setTextSelectionInProgress(!1),o)t.data.length?(h(t.data,r,i,n,l),c=r.getLineNumber(),a=r.getCharNumber(),s=i.getTextSelectionInProgress()):(h("",r,i,n),c=r.getLineNumber(),a=r.getCharNumber(),s=i.getTextSelectionInProgress()),o=!1,i.setDrag(!1),t.target.value="";else{let e=n.getElementsByClassName("text")[c-1],i=e.innerText;t.data.length&&(e.innerHTML="​"==i?"<pre>"+t.data+"</pre>":"<pre>"+i.slice(0,a)+t.data+i.slice(a)+"</pre>",a+=1,r.setCharNumber(a));let l=n.getElementsByClassName("code_editor_cursor")[0];a>e.innerText.length?l.style.left=e.innerText.length*d+g+"px":l.style.left=a*d+g+"px",t.target.value=""}e(n,r)}(l,t,n,r,i)})),l.addEventListener("blur",(()=>{t.getElementsByClassName("code_editor_cursor")[0].style.width="0px"})),l.addEventListener("focus",(()=>{t.getElementsByClassName("code_editor_cursor")[0].style.width="1px"})),l.addEventListener("keydown",(l=>{"Enter"==l.key?function(t,n,r,i){let l=n.getDrag(),s=n.getTextSelectionInProgress(),o=r.getLineNumber(),a=r.getCharNumber(),c=r.getLineHeight(),g=r.getNumberLineWidth(),u=r.getLineStart(),m=r.getLineEnd();if(d(t,r,i),s=!1,n.setTextSelectionInProgress(!1),l){let d=t.getElementsByClassName("line"),p=u.line>m.line||u.line==m.line&&u.char>m.char?m:u,x=u.line>m.line||u.line==m.line&&u.char>m.char?u:m;x.line>d.length&&(x.line=d.length),p.line<1&&(p.line=1);let b=t.getElementsByClassName("text")[p.line-1],f=b.innerText,N=t.getElementsByClassName("number_line_cont")[0],L=t.getElementsByClassName("number_line"),C=document.createElement("div");C.classList.add("number_line");let E=document.createElement("pre");E.innerText=L.length,C.append(E),N.appendChild(C),h("",r,n,t,i),o=r.getLineNumber(),a=r.getCharNumber(),s=n.getTextSelectionInProgress();let y=document.createElement("div");y.classList.add("line");let T=document.createElement("div");T.classList.add("text");let S=document.createElement("pre");console.log(d[o-1],o),S.innerText=d[o-1].innerText.slice(a),T.append(S),y.append(T),t.getElementsByClassName("code_editor_lines_container")[0].insertBefore(y,d[o]),o+=1,r.setLineNumber(o);let _=t.getElementsByClassName("code_editor_cursor")[0];_.style.top=(o-1)*c+"px",_.style.left=g+"px",a=0,r.setCharNumber(a),f.slice(0,p.char)?b.innerHTML="<pre>"+f.slice(0,p.char)+"</pre>":b.innerHTML="<pre>&#8203;</pre>",e(t,r),l=!1,n.setDrag(!1)}else{let n=t.getElementsByClassName("text")[o-1],i=n.innerText;i.slice(0,a)?n.innerHTML="<pre>"+i.slice(0,a)+"</pre>":n.innerHTML="<pre>&#8203;</pre>";let l=t.getElementsByClassName("number_line_cont")[0],s=t.getElementsByClassName("number_line"),d=document.createElement("div");d.classList.add("number_line");let h=document.createElement("pre");h.innerText=s.length,d.append(h),l.appendChild(d);let u=t.getElementsByClassName("line"),m=document.createElement("div");m.classList.add("line");let p=document.createElement("div");p.classList.add("text");let x=document.createElement("pre");x.innerText=a>i.length?"":i.slice(a),p.append(x),m.append(p),t.getElementsByClassName("code_editor_lines_container")[0].insertBefore(m,u[o]),o+=1,r.setLineNumber(o);let b=t.getElementsByClassName("code_editor_cursor")[0];b.style.top=(o-1)*c+"px",b.style.left=g+"px",a=0,r.setCharNumber(a),e(t,r)}}(t,r,n,i):"Backspace"==l.key?function(t,n,r,i){let l=n.getDrag(),s=n.getTextSelectionInProgress(),o=r.getLineNumber(),a=r.getCharNumber(),g=r.getCharSize(),u=r.getLineHeight(),m=r.getNumberLineWidth();s=!1,n.setTextSelectionInProgress(!1);let p=t.getElementsByClassName("line");o>p.length&&(o=r.setLineNumber(p.length));let x=t.getElementsByClassName("text")[o-1],b=x.innerText;if(l)h("",r,n,t,i),o=r.getLineNumber(),a=r.getCharNumber(),s=n.getTextSelectionInProgress(),l=!1,n.setDrag(!1);else if(0==a&&1!=o){d(t,r,i),c(o,t),o=r.getLineNumber(),a=r.getCharNumber(),s=n.getTextSelectionInProgress(),o-=1,r.setLineNumber(o);let e=t.getElementsByClassName("code_editor_cursor")[0];x=t.getElementsByClassName("text")[o-1],e.style.top=(o-1)*u+"px",e.style.left=x.innerText.length*g+m+"px",a=x.innerText.length,r.setCharNumber(a),x.innerHTML="<pre>"+x.innerText.slice(0,x.innerText.length)+b+"</pre>"}else{if(0==a)return;x.innerHTML="<pre>"+b.slice(0,a-1)+b.slice(a)+"</pre>",document.getElementsByClassName("code_editor_cursor")[0].style.left=(a-1)*g+m+"px",a-=1,r.setCharNumber(a)}e(t,r)}(t,r,n,i):"Delete"==l.key?function(t,n,r,i){let l=n.getDrag(),s=n.getTextSelectionInProgress(),o=r.getLineNumber(),a=r.getCharNumber();s=!1,n.setTextSelectionInProgress(!1);let g=t.getElementsByClassName("line");o>g.length&&(o=r.setLineNumber(g.length));let u=t.getElementsByClassName("text")[o-1],m=u.innerText;if(l)h("",r,n,t,i),o=r.getLineNumber(),a=r.getCharNumber(),s=n.getTextSelectionInProgress(),l=!1,n.setDrag(!1);else if(m.length&&a!=m.length||o==g.length)u.innerHTML="<pre>"+m.slice(0,a)+m.slice(a+1)+"</pre>";else{d(t,r,i);let e=g[o].innerText;c(o+1,t),u.innerHTML="<pre>"+m+e+"</pre>"}e(t,r)}(t,r,n,i):"ArrowUp"==l.key?l.shiftKey?(l.preventDefault(),function(t,n,r){let i=t.getElementsByClassName("line"),l=r.getDrag(),s=r.getTextSelectionInProgress(),o=n.getLineNumber(),c=n.getCharNumber(),d=n.getCharSize(),h=n.getLineHeight(),g=n.getNumberLineWidth(),u=n.getLineEnd(),m=n.getLineStart();if(1!=o){let p=t.getElementsByClassName("code_editor_cursor")[0];p.style.top=(o-2)*h+"px",s?(u.line=u.line-1,n.setLineEnd(u)):(m=n.setLineStart({line:o,char:c}),u=n.setLineEnd({line:o-1,char:c}),s=r.setTextSelectionInProgress(!0)),o=n.setLineNumber(o-1),c>i[o-1].innerText.length&&("​"==i[o-1].innerText?(c=n.setCharNumber(0),u.char=0,n.setLineEnd(u),p.style.left=c*d+g+"px"):(c=n.setCharNumber(i[o-1].innerText.length),u.char=i[o-1].innerText.length,n.setLineEnd(u),p.style.left=c*d+g+"px")),l=r.setDrag(!0),e(t,n),a(t,n,r)}}(t,n,r)):function(t,n,r){o(t),r.setDrag(!1);let i=t.getElementsByClassName("line"),l=r.getTextSelectionInProgress(),s=n.getLineNumber(),a=n.getCharNumber(),c=n.getCharSize(),d=n.getLineHeight(),h=n.getNumberLineWidth();if(1!=s){let e=t.getElementsByClassName("code_editor_cursor")[0];e.style.top=(s-2)*d+"px",s=n.setLineNumber(s-1),a>i[s-1].innerText.length&&("​"==i[s-1].innerText?(a=n.setCharNumber(0),e.style.left=a*c+h+"px"):(a=n.setCharNumber(i[s-1].innerText.length),e.style.left=a*c+h+"px"))}l=r.setTextSelectionInProgress(!1),e(t,n)}(t,n,r):"ArrowDown"==l.key?l.shiftKey?(l.preventDefault(),function(t,n,r){let i=r.getDrag(),l=r.getTextSelectionInProgress(),s=n.getLineNumber(),o=n.getCharNumber(),c=n.getCharSize(),d=n.getLineHeight(),h=n.getNumberLineWidth(),g=n.getLineEnd(),u=n.getLineStart(),m=t.getElementsByClassName("line");if(s<t.getElementsByClassName("number_line").length-1){let p=t.getElementsByClassName("code_editor_cursor")[0];p.style.top=s*d+"px",l?(g.line=g.line+1,n.setLineEnd(g)):(u=n.setLineStart({line:s,char:o}),g=n.setLineEnd({line:s+1,char:o}),l=r.setTextSelectionInProgress(!0)),s<m.length&&o>m[s].innerText.length&&("​"==m[s].innerText?(o=n.setCharNumber(0),g.char=0,n.setLineEnd(g),p.style.left=o*c+h+"px"):(o=n.setCharNumber(m[s].innerText.length),g.char=m[s].innerText.length,n.setLineEnd(g),p.style.left=o*c+h+"px")),s=n.setLineNumber(s+1),i=r.setDrag(!0),e(t,n),a(t,n,r)}}(t,n,r)):function(t,n,r){o(t),r.setDrag(!1);let i=r.getTextSelectionInProgress(),l=n.getLineNumber(),s=n.getCharNumber(),a=n.getCharSize(),c=n.getLineHeight(),d=n.getNumberLineWidth();i=r.setTextSelectionInProgress(!1);let h=t.getElementsByClassName("line");if(l<t.getElementsByClassName("number_line").length-1){let e=t.getElementsByClassName("code_editor_cursor")[0];e.style.top=l*c+"px",l<h.length&&s>h[l].innerText.length&&("​"==h[l-1].innerText?(s=n.setCharNumber(0),e.style.left=s*a+d+"px"):(s=n.setCharNumber(h[l].innerText.length),e.style.left=s*a+d+"px")),l=n.setLineNumber(l+1)}e(t,n)}(t,n,r):"ArrowLeft"==l.key?l.shiftKey?function(t,n,r){let i=r.getDrag(),l=r.getTextSelectionInProgress(),s=n.getLineNumber(),o=n.getCharNumber(),c=n.getCharSize(),d=n.getLineHeight(),h=n.getNumberLineWidth(),g=n.getLineEnd(),u=n.getLineStart(),m=t.getElementsByClassName("line"),p=t.getElementsByClassName("code_editor_cursor")[0];l||(u=n.setLineStart({line:s,char:o}),g=n.setLineEnd({line:s,char:o}),l=r.setTextSelectionInProgress(!0)),o>0?(o=n.setCharNumber(o-1),g.char=o,n.setLineEnd(g),p.style.left=(o-1)*c+h+"px"):0==o&&1!=s&&("​"==m[s-2].innerText?(o=n.setCharNumber(0),g.char=1,n.setLineEnd(g)):(o=n.setCharNumber(m[s-2].innerText.length),g.char=m[s-2].innerText.length,n.setLineEnd(g)),s=n.setLineNumber(s-1),g.line=g.line-1,n.setLineEnd(g),p.style.left=o*c+h+"px",p.style.top=s*d+"px"),i=r.setDrag(!0),e(r,n),a(t,n,r)}(t,n,r):function(t,n,r){let i=r.getTextSelectionInProgress(),l=n.getLineNumber(),s=n.getCharNumber(),a=n.getCharSize(),c=n.getLineHeight(),d=n.getNumberLineWidth();o(t),r.setDrag(!1),i=r.setTextSelectionInProgress(!1);let h=t.getElementsByClassName("line"),g=t.getElementsByClassName("code_editor_cursor")[0];s>0?(s=n.setCharNumber(s-1),g.style.left=s*a+d+"px"):0==s&&1!=l&&(s="​"==h[l-2].innerText?n.setCharNumber(0):n.setCharNumber(h[l-2].innerText.length),l=n.setLineNumber(l-1),g.style.left=s*a+d+"px",g.style.top=(l-1)*c+"px"),e(t,n)}(t,n,r):"ArrowRight"==l.key?l.shiftKey?function(t,n,r){let i=r.getDrag(),l=r.getTextSelectionInProgress(),s=n.getLineNumber(),o=n.getCharNumber(),c=n.getCharSize(),d=n.getLineHeight(),h=n.getNumberLineWidth(),g=n.getLineEnd(),u=n.getLineStart(),m=t.getElementsByClassName("line"),p=t.getElementsByClassName("code_editor_cursor")[0];o<m[s-1].innerText.length?(l||(u=n.setLineStart({line:s,char:o}),g=n.setLineEnd({line:s,char:o}),l=r.setTextSelectionInProgress(!0)),"​"==m[s-1].innerText&&s!=m.length?(o=n.setCharNumber(0),s=n.setLineNumber(s+1),g.line=g.line+1,g.char=1,n.setLineEnd(g),p.style.left=o*c+h+"px",p.style.top=s*d+"px"):(o=n.setCharNumber(o+1),g.char=g.char+1,n.setLineEnd(g),p.style.left=o*c+h+"px")):o==m[s-1].innerText.length&&s!=m.length&&(o=n.setCharNumber(0),s=n.setLineNumber(s+1),g.char=1,g.line=g.line+1,n.setLineEnd(g),p.style.left=o*c+h+"px",p.style.top=s*d+"px"),i=r.setDrag(!0),e(t,n),a(t,n,r)}(t,n,r):function(t,n,r){let i=r.getTextSelectionInProgress(),l=n.getLineNumber(),s=n.getCharNumber(),a=n.getCharSize(),c=n.getLineHeight(),d=n.getNumberLineWidth();o(t),r.setDrag(!1),i=r.setTextSelectionInProgress(!1);let h=t.getElementsByClassName("line"),g=t.getElementsByClassName("code_editor_cursor")[0];s<h[l-1].innerText.length?"​"==h[l-1].innerText&&l!=h.length?(s=n.setCharNumber(0),l=n.setLineNumber(l+1),g.style.left=s*a+d+"px",g.style.top=l*c+"px"):(s=n.setCharNumber(s+1),g.style.left=s*a+d+"px"):s==h[l-1].innerText.length&&l!=h.length&&(s=n.setCharNumber(0),l=n.setLineNumber(l+1),g.style.left=s*a+d+"px",g.style.top=(l-1)*c+"px"),e(t,n)}(t,n,r):"c"==l.key||"C"==l.key?l.ctrlKey&&(l.preventDefault(),async function(e){let t=e.getElementsByClassName("background_selected_text"),n="";for(let e=0;e<t.length;e++)"​"==t[e].innerText?n+="\n":n+=t[e].innerText+"\n";await navigator.clipboard.writeText(n)}(t)):"v"==l.key||"V"==l.key?l.ctrlKey&&(l.preventDefault(),async function(t,n,r,i){r.getDrag();let l=r.getTextSelectionInProgress(),s=n.getLineNumber(),o=n.getCharNumber(),a=n.getCharSize(),c=n.getLineHeight(),g=n.getNumberLineWidth();n.getLineEnd(),n.getLineStart(),d(t,n,i),l=r.setTextSelectionInProgress(!1);let u=t.getElementsByClassName("line"),m=t.getElementsByClassName("background_selected_text"),p=t.getElementsByClassName("code_editor_cursor")[0];m.length&&(h("",n,r,t,i),s=n.getLineNumber(),o=n.getCharNumber(),l=r.getTextSelectionInProgress());let x=(await navigator.clipboard.readText()).split("\n");if(x.length){if(1==x.length){if("\n"==x[0])return;let e=u[s-1].innerText.slice(0,o),t=u[s-1].innerText.slice(o,u[s-1].innerText.length);u[s-1].childNodes[0].innerHTML="<pre>"+e+x[0].replaceAll("\r","")+t+"</pre>",o=n.setCharNumber(e.length+x[0].length),p.style.left=o*a+g+"px"}else{"\n"!=x[x.length]&&""!=x[x.length]||x.pop();let e=u[s-1].innerText.slice(0,o),r=u[s-1].innerText.slice(o,u[s-1].innerText.length);u[s-1].childNodes[0].innerHTML="<pre>"+e+x[0].replaceAll("\r","")+"</pre>";let i=t.getElementsByClassName("number_line_cont")[0],l=t.getElementsByClassName("number_line"),d=t.getElementsByClassName("code_editor_lines_container")[0];for(let e=1;e<x.length-1;e++){let t=document.createElement("div");t.classList.add("number_line");let r=document.createElement("pre");r.innerText=l.length,t.append(r),i.appendChild(t);let o=document.createElement("div");o.classList.add("line");let a=document.createElement("div");a.classList.add("text");let c=document.createElement("pre");c.innerText=x[e].replaceAll("\r",""),a.append(c),o.append(a),d.insertBefore(o,u[s]),s=n.setLineNumber(s+1)}let h=document.createElement("div");h.classList.add("number_line");let m=document.createElement("pre");m.innerText=l.length,h.append(m),i.appendChild(h);let p=document.createElement("div");p.classList.add("line");let b=document.createElement("div");b.classList.add("text");let f=document.createElement("pre");f.innerText=x[x.length-1].replaceAll("\r","")+r,b.append(f),p.append(b),d.insertBefore(p,u[s]),s=n.setLineNumber(s+1);let N=t.getElementsByClassName("code_editor_cursor")[0];o=n.setCharNumber(x[x.length-1].length),N.style.left=o*a+g+"px",N.style.top=(s-1)*c+"px"}e(t,n)}}(t,n,r,i)):"z"==l.key||"Z"==l.key?l.ctrlKey&&(l.preventDefault(),function(t,n,r,i){let l=r.getTextSelectionInProgress(),s=n.getLineNumber(),o=n.getCharNumber(),a=n.getCharSize(),c=n.getLineHeight(),d=n.getLineEnd(),h=n.getLineStart(),g=i.getUndoStore();l=r.setTextSelectionInProgress(!1);let u=t.getElementsByClassName("code_editor_lines_container")[0],m=t.getElementsByClassName("number_line_cont")[0];if(g.length){if(i.pushIntoRedoStore({lineNumber:s,charNumber:o,lineEnd:d,lineStart:h,data:u.innerHTML,numberLineData:m.innerHTML}),g.length){s=n.setLineNumber(g[g.length-1].lineNumber),o=n.setCharNumber(g[g.length-1].charNumber),d=n.setLineEnd(g[g.length-1].lineEnd),h=n.setLineStart(g[g.length-1].lineStart),u.innerHTML=g[g.length-1].data,m.innerHTML=g[g.length-1].numberLineData;let e=t.getElementsByClassName("code_editor_cursor")[0];e.style.left=o*a+35+"px",e.style.top=(s-1)*c+"px"}i.popFromUndoStore(),e(t,n)}}(t,n,r,i)):"y"==l.key||"Y"==l.key?l.ctrlKey&&(l.preventDefault(),function(t,n,r,i){let l=r.getTextSelectionInProgress(),s=n.getLineNumber(),o=n.getCharNumber(),a=n.getCharSize(),c=n.getLineHeight(),d=n.getLineEnd(),h=n.getLineStart(),g=i.getRedoStore();l=r.setTextSelectionInProgress(!1);let u=t.getElementsByClassName("code_editor_lines_container")[0],m=t.getElementsByClassName("number_line_cont")[0];if(g.length){if(i.pushIntoUndoStore({lineNumber:s,charNumber:o,lineEnd:d,lineStart:h,data:u.innerHTML,numberLineData:m.innerHTML}),g.length){s=n.setLineNumber(g[g.length-1].lineNumber),o=n.setCharNumber(g[g.length-1].charNumber),d=n.setLineEnd(g[g.length-1].lineEnd),h=n.setLineStart(g[g.length-1].lineStart),u.innerHTML=g[g.length-1].data,m.innerHTML=g[g.length-1].numberLineData;let e=t.getElementsByClassName("code_editor_cursor")[0];e.style.left=o*a+35+"px",e.style.top=(s-1)*c+"px"}i.popFromRedoStore(),e(t,n)}}(t,n,r,i)):"a"!=l.key&&"A"!=l.key||l.ctrlKey&&(l.preventDefault(),function(e,t,n){let r=n.getDrag(),i=t.getLineEnd(),l=t.getLineStart(),s=e.getElementsByClassName("line");for(let e=0;e<s.length;e++)s[e].childNodes[0].childNodes[0].classList.add("background_selected_text");l=t.setLineStart({line:1,char:0}),i=t.setLineEnd({line:s.length,char:s[s.length-1].innerText.length}),r=n.setDrag(!0)}(t,n,r))}))}(t,this.dataVariables,this.conditionalVariables,this.arrayVariables)}setupInitialDomData(){let e=this.codeEditor.getCodeEditor(),t=e.getElementsByClassName("code_editor_line_measure")[0].childNodes[0];this.dataVariables.setCharSize(t.clientWidth/40);let n=e.getElementsByClassName("line")[0].getBoundingClientRect(),r=n.top-n.bottom;this.dataVariables.setLineHeight(Math.abs(r)),function(e){let t=!0;setInterval((()=>{e.getElementsByClassName("code_editor_cursor_blink")[0].style.visibility=t?"hidden":"visible",t=!t}),500)}(e),function(e,t,n,r){window.addEventListener("mouseup",(e=>{t.setMouseDown(!1),n.clearCodeEditorAutoScrollX(),n.clearCodeEditorAutoScrollY()})),window.onload=()=>{e.querySelector("#code-editor-cursor-input").focus()},window.addEventListener("mousemove",(i=>{let l=r.getCharSize(),s=r.getLineEnd(),o=t.getMouseDown(),c=t.getDrag();if(o&&c){let o=e.offsetTop,c=e.offsetTop+e.clientHeight,d=e.offsetLeft,h=e.offsetLeft+e.clientWidth,g=e.getElementsByClassName("line");i.clientX>h&&(n.clearCodeEditorAutoScrollX(),n.clearCodeEditorAutoScrollY(),n.setCodeEditorAutoScrollX(setInterval((()=>{e.scrollLeft=e.scrollLeft+10;let n=Math.floor(10/l);s.char<=g[s.line-1].innerText.length&&(s.char=s.char+n,r.setLineEnd(s),a(e,r,t))}),10))),i.clientX<d&&(n.clearCodeEditorAutoScrollX(),n.clearCodeEditorAutoScrollY(),n.setCodeEditorAutoScrollX(setInterval((()=>{e.scrollLeft=e.scrollLeft-10;let n=Math.floor(10/l);s.char>=0&&(s.char=s.char-n,r.setLineEnd(s),a(e,r,t))}),10))),i.clientY>c&&(n.clearCodeEditorAutoScrollX(),n.clearCodeEditorAutoScrollY(),n.setCodeEditorAutoScrollY(setInterval((()=>{e.scrollTop=e.scrollTop+18.2,s.line<=g.length&&(s.line=s.line+1,r.setLineEnd(s),a(e,r,t))}),100))),i.clientY<o&&(n.clearCodeEditorAutoScrollX(),n.clearCodeEditorAutoScrollY(),n.setCodeEditorAutoScrollY(setInterval((()=>{e.scrollTop=e.scrollTop-18.2,s.line>1&&(s.line=s.line-1,r.setLineEnd(s),a(e,r,t))}),100)))}}))}(e,this.conditionalVariables,this.intervalVariables,this.dataVariables)}setCode(t){!async function(t,n,r,i,l){i.getDrag();let s=i.getTextSelectionInProgress(),o=r.getLineNumber(),a=r.getCharNumber(),c=r.getCharSize(),d=r.getLineHeight(),h=r.getNumberLineWidth();r.getLineEnd(),r.getLineStart(),s=i.setTextSelectionInProgress(!1);let g=n.getElementsByClassName("line"),u=(n.getElementsByClassName("background_selected_text"),n.getElementsByClassName("code_editor_cursor")[0]),m=t.split("\n");if(m.length){if(1==m.length){if("\n"==m[0])return;let e=g[o-1].innerText.slice(0,a),t=g[o-1].innerText.slice(a,g[o-1].innerText.length);g[o-1].childNodes[0].innerHTML="<pre>"+e+m[0].replaceAll("\r","")+t+"</pre>",a=r.setCharNumber(e.length+m[0].length),u.style.left=a*c+h+"px"}else{"\n"!=m[m.length]&&""!=m[m.length]||m.pop();let e=g[o-1].innerText.slice(0,a),t=g[o-1].innerText.slice(a,g[o-1].innerText.length);g[o-1].childNodes[0].innerHTML="<pre>"+e+m[0].replaceAll("\r","")+"</pre>";let i=n.getElementsByClassName("number_line_cont")[0],l=n.getElementsByClassName("number_line"),s=n.getElementsByClassName("code_editor_lines_container")[0];for(let e=1;e<m.length-1;e++){let t=document.createElement("div");t.classList.add("number_line");let n=document.createElement("pre");n.innerText=l.length,t.append(n),i.appendChild(t);let a=document.createElement("div");a.classList.add("line");let c=document.createElement("div");c.classList.add("text");let d=document.createElement("pre");d.innerText=m[e].replaceAll("\r",""),c.append(d),a.append(c),s.insertBefore(a,g[o]),o=r.setLineNumber(o+1)}let u=document.createElement("div");u.classList.add("number_line");let p=document.createElement("pre");p.innerText=l.length,u.append(p),i.appendChild(u);let x=document.createElement("div");x.classList.add("line");let b=document.createElement("div");b.classList.add("text");let f=document.createElement("pre");f.innerText=m[m.length-1].replaceAll("\r","")+t,b.append(f),x.append(b),s.insertBefore(x,g[o]),o=r.setLineNumber(o+1);let N=n.getElementsByClassName("code_editor_cursor")[0];a=r.setCharNumber(m[m.length-1].length),N.style.left=a*c+h+"px",N.style.top=(o-1)*d+"px"}e(n,r)}}(t,this.codeEditor.getCodeEditor(),this.dataVariables,this.conditionalVariables,this.arrayVariables)}getCode(){return function(e){let t=e.getElementsByClassName("line"),n="";for(let e=0;e<t.length;e++)"​"==t[e].innerText?n+="\n":n+=t[e].innerText+"\n";return n}(this.codeEditor.getCodeEditor())}}class w{constructor(e){this.codeEditorCont=e,this.codeEditorNodeObject=new v}createCodeEditorDom(){const e=this.codeEditorNodeObject.generateCodeEditorDOM();this.codeEditorCont.appendChild(e),this.codeEditorNodeObject.setupInitialDomData()}setCode(e){this.codeEditorNodeObject.setCode(e)}getCode(){return this.codeEditorNodeObject.getCode(codeText)}}})(),r})()));